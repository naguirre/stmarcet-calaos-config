<?xml version="1.0" encoding="UTF-8" ?>
<calaos:rules xmlns:calaos="http://www.calaos.fr">
    <calaos:rule name="Xiamoi button" type="Chambre d&apos;Emma">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="io_9" oper="==" val="true" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="io_10" val="toggle" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Interrupteur" type="Cuisine">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="io_23" oper="==" val="true" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="io_22" val="toggle" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Interrupteur Hue ON" type="Chambre de Lison">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="io_27" oper="==" val="true" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="io_30" val="on" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Interrupteur Hue OFF" type="Chambre de Lison">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="io_26" oper="==" val="false" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="io_30" val="off" />
        </calaos:action>
        <calaos:action type="standard">
            <calaos:output id="intern_5" val="0" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Plages horraire chauffage jour" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="input_3" oper="==" val="true" />
        </calaos:condition>
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="intern_0" val="" val_var="intern_1" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Plages horraire chauffage nuit" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="input_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="intern_0" val="" val_var="intern_2" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Changement consigne jour" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="input_3" oper="==" val="true" />
        </calaos:condition>
        <calaos:condition type="output" trigger="true">
            <calaos:output id="intern_1" oper="==" val="changed" />
        </calaos:condition>
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="intern_0" val="" val_var="intern_1" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Changement consigne nuit" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="input_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:condition type="output" trigger="true">
            <calaos:output id="intern_2" oper="==" val="changed" />
        </calaos:condition>
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="intern_0" val="" val_var="intern_2" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Depart en vacances" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_3" oper="==" val="true" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="intern_0" val="6" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Retour Vacances" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_0" oper="==" val="" val_var="intern_2" />
        </calaos:condition>
    </calaos:rule>
    <calaos:rule name="chauffage on" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="io_3" oper="INF" val="" val_var="intern_0" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="output_0" val="true" />
        </calaos:action>
        <calaos:action type="standard">
            <calaos:output id="io_2" val="true" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="chauffage off" specialType="" type="Bar">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="intern_3" oper="==" val="false" />
        </calaos:condition>
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="io_3" oper="SUP=" val="" val_var="intern_0" />
        </calaos:condition>
        <calaos:action type="standard">
            <calaos:output id="output_0" val="false" />
        </calaos:action>
        <calaos:action type="standard">
            <calaos:output id="io_2" val="false" />
        </calaos:action>
    </calaos:rule>
    <calaos:rule name="Hue remote UP" type="Chambre de Lison">
        <calaos:condition type="standard" trigger="true">
            <calaos:input id="io_28" oper="==" val="true" />
        </calaos:condition>
        <calaos:action type="script">
            <calaos:script type="lua">
                <![CDATA[print("Lison light")

cnt = calaos:getInputValue("intern_5")

if cnt == 0 then
  calaos:setOutputValue("io_30", "set 1")
elseif cnt == 1 then
  calaos:setOutputValue("io_30", "set 25")
elseif cnt == 2 then
  calaos:setOutputValue("io_30", "set 50")
elseif cnt == 3 then
  calaos:setOutputValue("io_30", "set 100")
else
  calaos:setOutputValue("v", "false")
end

cnt = cnt + 1
if cnt > 3 then
    cnt = 0
end
calaos:setOutputValue("intern_5", cnt)
return true
]]>
</calaos:script>
        </calaos:action>
    </calaos:rule>
</calaos:rules>
